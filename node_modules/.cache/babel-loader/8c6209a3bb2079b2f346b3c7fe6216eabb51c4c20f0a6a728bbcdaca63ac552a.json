{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import TransactionForm from'./components/TransactionForm';import TransactionList from'./components/TransactionList';import Solde from'./components/Solde';import CategoryChart from'./components/CategoryChart';import HistoryChart from'./components/HistoryChart';import BudgetForm from'./components/BudgetForm';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[transactions,setTransactions]=useState([]);const[solde,setSolde]=useState(0);const[budgets,setBudgets]=useState({});const fetchTransactions=async()=>{try{const response=await axios.get('http://localhost:8888/finance-flow/finance-flow/src/api.php');setTransactions(response.data);calculateSolde(response.data);}catch(error){console.error(\"Erreur lors de la récupération des transactions :\",error);}};const fetchBudgets=async()=>{try{const response=await axios.get('http://localhost:8888/finance-flow/finance-flow/src/api.php?getBudgets=true');const budgetData=response.data.reduce((acc,_ref)=>{let{categorie_id,budget}=_ref;return{...acc,[categorie_id]:budget};},{});setBudgets(budgetData);}catch(error){console.error(\"Erreur lors de la récupération des budgets :\",error);}};const calculateSolde=transactions=>{const total=transactions.reduce((acc,tr)=>acc+(tr.type==='revenu'?parseFloat(tr.montant):-parseFloat(tr.montant)),0);setSolde(total);};const handleAddTransaction=async transaction=>{try{const response=await axios.post('http://localhost:8888/finance-flow/finance-flow/src/api.php',transaction);if(response.data.status==='success'){fetchTransactions();// Actualise les transactions si l'ajout est réussi\n}else{console.warn(\"Erreur détectée :\",response.data.message||\"Message d'erreur non défini.\");}}catch(error){console.error(\"Erreur lors de l'ajout de la transaction :\",error.message||error);}};useEffect(()=>{fetchTransactions();fetchBudgets();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Gestionnaire de Budget\"}),/*#__PURE__*/_jsx(Solde,{solde:solde})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"charts-container\",children:[/*#__PURE__*/_jsx(CategoryChart,{transactions:transactions,budgets:budgets}),/*#__PURE__*/_jsx(HistoryChart,{transactions:transactions})]}),/*#__PURE__*/_jsx(BudgetForm,{}),/*#__PURE__*/_jsx(TransactionForm,{onAddTransaction:handleAddTransaction}),/*#__PURE__*/_jsx(TransactionList,{transactions:transactions})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","TransactionForm","TransactionList","Solde","CategoryChart","HistoryChart","BudgetForm","jsx","_jsx","jsxs","_jsxs","App","transactions","setTransactions","solde","setSolde","budgets","setBudgets","fetchTransactions","response","get","data","calculateSolde","error","console","fetchBudgets","budgetData","reduce","acc","_ref","categorie_id","budget","total","tr","type","parseFloat","montant","handleAddTransaction","transaction","post","status","warn","message","className","children","onAddTransaction"],"sources":["/Applications/MAMP/htdocs/finance-flow/finance-flow/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport TransactionForm from './components/TransactionForm';\nimport TransactionList from './components/TransactionList';\nimport Solde from './components/Solde';\nimport CategoryChart from './components/CategoryChart';\nimport HistoryChart from './components/HistoryChart';\nimport BudgetForm from './components/BudgetForm';\nimport './App.css';\n\nfunction App() {\n    const [transactions, setTransactions] = useState([]);\n    const [solde, setSolde] = useState(0);\n    const [budgets, setBudgets] = useState({});\n\n    const fetchTransactions = async () => {\n        try {\n            const response = await axios.get('http://localhost:8888/finance-flow/finance-flow/src/api.php');\n            setTransactions(response.data);\n            calculateSolde(response.data);\n        } catch (error) {\n            console.error(\"Erreur lors de la récupération des transactions :\", error);\n        }\n    };\n\n    const fetchBudgets = async () => {\n        try {\n            const response = await axios.get('http://localhost:8888/finance-flow/finance-flow/src/api.php?getBudgets=true');\n            const budgetData = response.data.reduce((acc, { categorie_id, budget }) => ({ ...acc, [categorie_id]: budget }), {});\n            setBudgets(budgetData);\n        } catch (error) {\n            console.error(\"Erreur lors de la récupération des budgets :\", error);\n        }\n    };\n\n    const calculateSolde = (transactions) => {\n        const total = transactions.reduce((acc, tr) => acc + (tr.type === 'revenu' ? parseFloat(tr.montant) : -parseFloat(tr.montant)), 0);\n        setSolde(total);\n    };\n\n    const handleAddTransaction = async (transaction) => {\n        try {\n            const response = await axios.post('http://localhost:8888/finance-flow/finance-flow/src/api.php', transaction);\n            if (response.data.status === 'success') {\n                fetchTransactions(); // Actualise les transactions si l'ajout est réussi\n            } else {\n                console.warn(\"Erreur détectée :\", response.data.message || \"Message d'erreur non défini.\");\n            }\n        } catch (error) {\n            console.error(\"Erreur lors de l'ajout de la transaction :\", error.message || error);\n        }\n    };\n\n    useEffect(() => {\n        fetchTransactions();\n        fetchBudgets();\n    }, []);\n\n    return (\n        <div className=\"app-container\">\n            <header className=\"app-header\">\n                <h1>Mon Gestionnaire de Budget</h1>\n                <Solde solde={solde} />\n            </header>\n            <main className=\"main-content\">\n                <div className=\"charts-container\">\n                    <CategoryChart transactions={transactions} budgets={budgets} />\n                    <HistoryChart transactions={transactions} />\n                </div>\n                <BudgetForm />\n                <TransactionForm onAddTransaction={handleAddTransaction} />\n                <TransactionList transactions={transactions} />\n            </main>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}